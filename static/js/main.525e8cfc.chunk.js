(this["webpackJsonpcontact-manager"]=this["webpackJsonpcontact-manager"]||[]).push([[0],{101:function(e,t,a){e.exports=a(125)},125:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),c=a(17),o=a(22),i=a(169),s=a(170),u=a(8),m=a(16),d=a(164),p=a(166),E=a(167),h=a(168),b=a(88),f=a(188),v=a(128),g=a(84),O=a.n(g),j=a(162),y=Object(j.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),_=function(e){return{type:"FETCH_SUCCESS_AUTH",payload:{user:e.user,session_id:e.session_id}}};var w=function(){var e,t=y(),a=Object(c.c)(),l=Object(m.g)(),i=Object(c.d)((function(e){return e.auth})),s=Object(n.useState)(null),g=Object(u.a)(s,2),j=g[0],_=g[1],w=Boolean(j);return r.a.createElement("div",{className:t.root},r.a.createElement(d.a,{position:"static"},r.a.createElement(p.a,null,r.a.createElement(E.a,{variant:"h6",className:t.title},"Contacts"),i.session_id?r.a.createElement("div",null,null===(e=i.user)||void 0===e?void 0:e.username,r.a.createElement(h.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){_(e.currentTarget)},color:"inherit"},r.a.createElement(O.a,null)),r.a.createElement(b.a,{id:"menu-appbar",anchorEl:j,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:w,onClose:function(){_(null)}},r.a.createElement(f.a,{onClick:function(){_(null),a({type:"LOGOUT"}),l.push("/login")}},"Logout"))):r.a.createElement(v.a,{color:"inherit",component:o.b,to:"/login"},"Sign in"))))},C=Object(j.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1}}})),x=function(){var e=C();return r.a.createElement("div",{className:e.root},r.a.createElement(d.a,{position:"static"},r.a.createElement(p.a,null,r.a.createElement(E.a,{variant:"h6",className:e.title},"Footer"))))},S=a(55),T=a.n(S),A=function(e){var t=e.children;return r.a.createElement("div",{className:T.a.app},r.a.createElement(i.a,null),r.a.createElement("div",{className:T.a.header},r.a.createElement(w,null)),r.a.createElement("div",{className:T.a.content},r.a.createElement(s.a,null,t)),r.a.createElement("div",{className:T.a.footer},r.a.createElement(x,null)))},k=a(2);function N(e){var t=e.children,a=Object(k.a)(e,["children"]),n=Object(c.d)((function(e){return e.auth}));return r.a.createElement(m.b,Object.assign({},a,{render:function(e){var a=e.location;return n.session_id?t:r.a.createElement(m.a,{to:{pathname:"/login",state:{from:a}}})}}))}var L=a(171),R=a(186),H=a(174),P=a(29),D=a(185),F=function(e){return r.a.createElement(D.a,Object.assign({elevation:6,variant:"filled"},e))},U=Object(j.a)((function(e){return{container:{display:"flex",justifyContent:"center"},form:{width:"100%",maxWidth:400,padding:e.spacing(3),border:"1px solid #eeeeee",borderRadius:4,"& .MuiTextField-root":{width:"100%"}},button:{marginTop:30}}})),M=a(14),W=a(60),q=a(36),G=a(62),B=a.n(G),I="https://reqres.in/api",Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,n){fetch(e,t).then((function(e){if(e.status<400)return e.json();throw e})).then((function(e){a(e)})).catch((function(e){e.json().then((function(e){n(e)}))}))}))},J=function(){function e(){Object(W.a)(this,e)}return Object(q.a)(e,null,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.params,n=void 0===a?{}:a,r=B.a.stringify(Object(M.a)({},n),{arrayFormat:"comma"});return Z("".concat(I).concat(e,"?").concat(r),{mode:"cors",headers:{"Content-type":"application/json"}})}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.params,n=void 0===a?{}:a,r=t.body,l=void 0===r?{}:r,c=B.a.stringify(Object(M.a)({},n),{arrayFormat:"comma"});return Z("".concat(I).concat(e,"?").concat(c),{method:"POST",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(l)})}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.params,n=void 0===a?{}:a,r=t.body,l=void 0===r?{}:r,c=B.a.stringify(Object(M.a)({},n),{arrayFormat:"comma"});return Z("".concat(I).concat(e,"?").concat(c),{method:"DELETE",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(l)})}}]),e}(),z=function(){var e,t,a=U(),l=Object(m.g)(),o=Object(c.c)(),i=Object(P.b)(),s=i.handleSubmit,d=i.errors,p=i.control,h=Object(n.useState)(""),b=Object(u.a)(h,2),f=b[0],g=b[1],O=Object(n.useState)(!1),j=Object(u.a)(O,2),y=j[0],w=j[1];return r.a.createElement("div",{className:a.container},r.a.createElement("form",{onSubmit:s((function(e){w(!0),g("");var t={params:{delay:5},body:{username:e.email,password:e.password}};J.post("/login",t).then((function(t){return o(_({user:{username:e.email,password:e.password},session_id:t.token}))})).then((function(e){w(!1)})).catch((function(e){g(e.error),w(!1)}))})),className:a.form},r.a.createElement(L.a,{container:!0,spacing:2},r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(E.a,{variant:"h6"},"Sign in"),r.a.createElement("p",null,"email: eve.holt@reqres.in ",r.a.createElement("br",null)," password: cityslicka")),r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(P.a,{name:"email",rules:{required:"Fill in the field",minLength:{value:2,message:"Min length is 2"},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Enter a valid email address"}},as:r.a.createElement(R.a,{label:"Email"}),control:p,helperText:null===d||void 0===d||null===(e=d.email)||void 0===e?void 0:e.message,error:!!(null===d||void 0===d?void 0:d.email),defaultValue:"",disabled:y})),r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(P.a,{name:"password",rules:{required:"Fill in the field",minLength:{value:6,message:"Min length is 6"}},as:r.a.createElement(R.a,{label:"Password",type:"password"}),control:p,helperText:null===d||void 0===d||null===(t=d.password)||void 0===t?void 0:t.message,error:!!(null===d||void 0===d?void 0:d.password),defaultValue:"",disabled:y})),r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(v.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,className:a.button,disabled:y},"Login")),f&&r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(F,{severity:"error"},f)),r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(H.a,{color:"primary",variant:"text",disableElevation:!0},r.a.createElement(v.a,{onClick:function(){l.push("/registration")}},"Don't have account?"))))))},V=Object(j.a)((function(e){return{container:{display:"flex",justifyContent:"center"},form:{width:"100%",maxWidth:400,padding:e.spacing(3),border:"1px solid #eeeeee",borderRadius:4,"& .MuiTextField-root":{width:"100%"}},button:{marginTop:30}}})),$=function(){var e,t,a,l=V(),o=Object(m.g)(),i=Object(c.c)(),s=Object(P.b)(),d=s.handleSubmit,p=s.errors,h=s.control,b=s.watch,f=Object(n.useState)(""),g=Object(u.a)(f,2),O=g[0],j=g[1],y=Object(n.useState)(!1),w=Object(u.a)(y,2),C=w[0],x=w[1];return r.a.createElement("div",{className:l.container},r.a.createElement("form",{onSubmit:d((function(e){x(!0),j("");var t={params:{delay:3},body:{username:e.email,password:e.password}};J.post("/register",t).then((function(t){return i(_({user:{username:e.email,password:e.password},session_id:t.token}))})).then((function(){x(!1)})).catch((function(e){j(e.error),x(!1)}))})),className:l.form},r.a.createElement(L.a,{container:!0,spacing:2},r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(E.a,{variant:"h6"},"Sign up"),r.a.createElement("p",null,"email: eve.holt@reqres.in ",r.a.createElement("br",null),"password: pistol")),r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(P.a,{name:"email",rules:{required:"Fill in the field",minLength:{value:2,message:"Min length is 2"},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Enter a valid email address"}},as:r.a.createElement(R.a,{label:"Email"}),control:h,helperText:null===p||void 0===p||null===(e=p.email)||void 0===e?void 0:e.message,error:!!(null===p||void 0===p?void 0:p.email)})),r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(P.a,{name:"password",rules:{required:"Fill in the field",minLength:{value:6,message:"Min length is 6"}},as:r.a.createElement(R.a,{label:"password",type:"password"}),control:h,helperText:null===p||void 0===p||null===(t=p.password)||void 0===t?void 0:t.message,error:!!(null===p||void 0===p?void 0:p.password),disabled:C})),r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(P.a,{name:"passwordRepear",rules:{required:"Fill in the field",validate:function(e){return e===b("password")||"Passwords don't match."}},as:r.a.createElement(R.a,{label:"Repeat password",type:"password"}),control:h,helperText:null===p||void 0===p||null===(a=p.passwordRepear)||void 0===a?void 0:a.message,error:!!(null===p||void 0===p?void 0:p.passwordRepear),disabled:C})),r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(v.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,className:l.button,disabled:C},"Create account")),O&&r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(F,{severity:"error"},O)),r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(H.a,{color:"primary",variant:"text",disableElevation:!0},r.a.createElement(v.a,{onClick:function(){return o.push("/login")}},"Have account?"))))))},X=a(181),Y=a(176),K=a(177),Q=a(179),ee=a(175),te=a(180),ae=a(187),ne=a(178),re=a(127),le=a(33),ce=a(71),oe=a.n(ce),ie=a(73),se=a.n(ie),ue=a(72),me=a.n(ue),de=a(70),pe=a.n(de),Ee=Object(j.a)((function(e){return{root:{flexShrink:0,marginLeft:e.spacing(2.5)}}}));function he(e){var t=Ee(),a=Object(le.a)(),n=e.count,l=e.page,c=e.rowsPerPage,o=e.onChangePage;return r.a.createElement("div",{className:t.root},r.a.createElement(h.a,{onClick:function(e){o(e,0)},disabled:0===l,"aria-label":"first page"},"rtl"===a.direction?r.a.createElement(pe.a,null):r.a.createElement(oe.a,null)),r.a.createElement(h.a,{onClick:function(e){o(e,l-1)},disabled:0===l,"aria-label":"previous page"},"rtl"===a.direction?r.a.createElement(me.a,null):r.a.createElement(se.a,null)),r.a.createElement(h.a,{onClick:function(e){o(e,l+1)},disabled:l>=Math.ceil(n/c)-1,"aria-label":"next page"},"rtl"===a.direction?r.a.createElement(se.a,null):r.a.createElement(me.a,null)),r.a.createElement(h.a,{onClick:function(e){o(e,Math.max(0,Math.ceil(n/c)-1))},disabled:l>=Math.ceil(n/c)-1,"aria-label":"last page"},"rtl"===a.direction?r.a.createElement(oe.a,null):r.a.createElement(pe.a,null)))}function be(e){var t=e.rows,a=r.a.useState(0),n=Object(u.a)(a,2),l=n[0],c=n[1],i=r.a.useState(5),s=Object(u.a)(i,2),m=s[0],d=s[1],p=m-Math.min(m,t.length-l*m);return r.a.createElement(ee.a,{component:re.a},r.a.createElement(Y.a,{"aria-label":"custom pagination table"},r.a.createElement(K.a,null,(m>0?t.slice(l*m,l*m+m):t).map((function(e){return r.a.createElement(ne.a,{key:e.name},r.a.createElement(Q.a,{component:"th",scope:"row"},e.id),r.a.createElement(Q.a,null,r.a.createElement(o.b,{to:"contacts/".concat(e.id)},e.name)),r.a.createElement(Q.a,null,e.color),r.a.createElement(Q.a,{align:"right"},e.pantone_value))})),p>0&&r.a.createElement(ne.a,{style:{height:53*p}},r.a.createElement(Q.a,{colSpan:6}))),r.a.createElement(te.a,null,r.a.createElement(ne.a,null,r.a.createElement(ae.a,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:3,count:t.length,rowsPerPage:m,page:l,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){c(t)},onChangeRowsPerPage:function(e){d(parseInt(e.target.value,10)),c(0)},ActionsComponent:he})))))}var fe=function(e){var t=e.fetchedContacts;return function(e){e({type:"SHOW_LOADER"}),e(function(e){var t=e.fetchedContacts;return{type:"UPDATE_CONTACTS",payload:{fetchedContacts:t}}}({fetchedContacts:t})),e({type:"HIDE_LOADER"})}};var ve=function(){var e=Object(c.c)(),t=Object(c.d)((function(e){return e.contacts.fetchedContacts})),a=Object(n.useState)(!0),l=Object(u.a)(a,2),o=l[0],i=l[1],s=Object(c.d)((function(e){return e.auth}));return Object(n.useEffect)((function(){if(s.session_id){J.get("/unknown",{params:{delay:3}}).then((function(t){return e(fe({fetchedContacts:t.data}))})).then((function(){return i(!1)})).catch((function(){return i(!1)}))}}),[s.session_id,e]),o?r.a.createElement(X.a,null):r.a.createElement(be,{rows:t})},ge=a(183),Oe=a(182),je=a(85),ye=a.n(je),_e=Object(j.a)((function(e){return{divider:{marginTop:20,marginBottom:30},back:{display:"flex","& .MuiBox-root":{color:"black",display:"inline-block",marginLeft:10,verticalAlign:"middle"}}}})),we=function(){var e=Object(m.h)(),t=_e(),a=Object(n.useState)(null),l=Object(u.a)(a,2),c=l[0],i=l[1],s=Object(n.useState)(!0),d=Object(u.a)(s,2),p=d[0],h=d[1],b=Object(n.useState)(null),f=Object(u.a)(b,2),v=f[0],g=f[1];return Object(n.useEffect)((function(){if(e.id){J.get("/unknown/".concat(e.id),{params:{delay:3}}).then((function(e){return i(e.data)})).then((function(){return h(!1)})).catch((function(e){g(e),h(!1)}))}}),[e.id]),v?r.a.createElement(E.a,{variant:"h6"},"Oops, invalid reguest"):p?r.a.createElement(X.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{variant:"h6",className:t.back},r.a.createElement(o.b,{to:"/contacts"},r.a.createElement(ye.a,null)),r.a.createElement(ge.a,{className:t.text},"Back")),r.a.createElement(Oe.a,{className:t.divider}),r.a.createElement(E.a,{variant:"h6"},r.a.createElement("strong",null,"Title:")," ",c.name),r.a.createElement(E.a,{variant:"h6"},r.a.createElement("strong",null,"Year:")," ",c.year),r.a.createElement(E.a,{variant:"h6"},r.a.createElement("strong",null,"Color:")," ",c.color))},Ce=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{variant:"h6",style:{textAlign:"center"}},"Uuups, 404"))},xe=function(){var e=Object(m.g)().location;return!Object(c.d)((function(e){return e.auth})).session_id||"/login"!==e.pathname&&"/registration"!==e.pathname?r.a.createElement(m.d,null,r.a.createElement(N,{path:"/contacts/:id"},r.a.createElement(we,null)),r.a.createElement(N,{path:"/contacts",exact:!0},r.a.createElement(ve,null)),r.a.createElement(N,{path:"/",exact:!0},r.a.createElement(ve,null)),r.a.createElement(m.b,{path:"/login",component:z}),r.a.createElement(m.b,{path:"/registration",component:$}),r.a.createElement(m.b,{path:"/404",component:Ce}),r.a.createElement(m.a,{to:"/404"})):r.a.createElement(m.a,{to:"/"})};var Se={fetchAuth:function(e){var t=e.user,a=e.session_id;return function(e){e({type:"SHOW_AUTH_LOADER"}),e(_({user:t,session_id:a})),e({type:"HIDE_AUTH_LOADER"})}}},Te=Object(c.b)(null,Se)((function(e){var t=e.fetchAuth,a=Object(c.d)((function(e){return e.auth}));return Object(n.useEffect)((function(){a.user&&t({user:a.user,session_id:a.session_id})}),[a.user,a.session_id,t]),r.a.createElement(o.a,null,r.a.createElement(A,null,r.a.createElement(xe,null)))})),Ae=a(31),ke=a(86),Ne=a(87),Le=new(a(89).a),Re={contacts:[],fetchedContacts:[],loading:!1},He={user:Le.get("user"),session_id:Le.get("session_id"),loading:!1},Pe=Object(Ae.combineReducers)({contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_CONTACT":case"DELETE_CONTACT":return Object(M.a)(Object(M.a)({},e),{},{contacts:e.contacts.concat([t.payload])});case"UPDATE_CONTACTS":return Object(M.a)(Object(M.a)({},e),{},{fetchedContacts:t.payload.fetchedContacts});case"SHOW_LOADER":return Object(M.a)(Object(M.a)({},e),{},{loading:!0});case"HIDE_LOADER":return Object(M.a)(Object(M.a)({},e),{},{loading:!1});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SUCCESS_AUTH":return Object(M.a)(Object(M.a)({},e),{},{user:t.payload.user,session_id:t.payload.session_id});case"LOGOUT":return Object(M.a)(Object(M.a)({},e),{},{user:null,session_id:null});case"SHOW_AUTH_LOADER":return Object(M.a)(Object(M.a)({},e),{},{loading:!0});case"HIDE_AUTH_LOADER":return Object(M.a)(Object(M.a)({},e),{},{loading:!1});default:return e}}}),De=Object(Ae.createStore)(Pe,Object(Ne.composeWithDevTools)(Object(Ae.applyMiddleware)(ke.a,(function(e){e.dispatch,e.getState;return function(e){return function(t){return"FETCH_SUCCESS_AUTH"===t.type&&(Le.set("session_id",t.payload.session_id,{path:"/",maxAge:2592e3}),Le.set("user",t.payload.user,{path:"/",maxAge:2592e3})),"LOGOUT"===t.type&&(Le.remove("session_id"),Le.remove("user")),e(t)}}}))));Object(l.render)(r.a.createElement(c.a,{store:De},r.a.createElement(Te,null)),document.getElementById("root"))},55:function(e,t,a){e.exports={app:"styles_app__1bCu6",header:"styles_header__1lRtA",content:"styles_content__1wFXh",footer:"styles_footer__9PF2R"}}},[[101,1,2]]]);
//# sourceMappingURL=main.525e8cfc.chunk.js.map